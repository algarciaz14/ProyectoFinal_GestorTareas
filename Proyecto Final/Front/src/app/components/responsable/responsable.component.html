<div class="container mt-5">
  <div class="card p-4 shadow-sm bg-light">
    <h2 class="text-center mb-4">Crear Responsable</h2>
    <form #responsableForm="ngForm" (ngSubmit)="agregarResponsable()">
      <div class="form-group">
        <label for="nombre">Nombre</label>
        <input
          type="text"
          id="nombre"
          [(ngModel)]="nuevoResponsable.nombre"
          name="nombre"
          class="form-control"
          placeholder="Nombre del responsable"
          required
        />

        <label for="apellido" class="mt-3">Apellido</label>
        <input
          type="text"
          id="apellido"
          [(ngModel)]="nuevoResponsable.apellido"
          name="apellido"
          class="form-control"
          placeholder="Apellido del responsable"
          required
        />

        <label for="correo" class="mt-3">Correo</label>
        <input
          type="email"
          id="correo"
          [(ngModel)]="nuevoResponsable.correo"
          name="correo"
          class="form-control"
          placeholder="example@gmail.com"
          required
        />

        <label for="celular" class="mt-3">Celular</label>
        <input
          type="tel"
          id="celular"
          [(ngModel)]="nuevoResponsable.celular"
          name="celular"
          class="form-control"
          placeholder="Número de 10 dígitos"
          required
          pattern="[0-9]{10}"
        />

        <label for="departamento" class="mt-3">Departamento:</label>
        <select
          id="departamento"
          [(ngModel)]="nuevoResponsable.departamentoId"
          name="departamentoId"
          class="form-control"
          required
        >
          <option value="" disabled selected>Seleccione un departamento</option>
          <option *ngFor="let departamento of departamentos" [value]="departamento.id">
            {{ departamento.nombre }}
          </option>
        </select>

        <label for="puesto" class="mt-3">Puesto:</label>
        <select
          id="puesto"
          [(ngModel)]="nuevoResponsable.puestoId"
          name="puestoId"
          class="form-control"
          required
        >
          <option value="" disabled selected>Seleccione un puesto</option>
          <option *ngFor="let puesto of puestos" [value]="puesto.id">
            {{ puesto.nombre }}
          </option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary btn-block" [disabled]="responsableForm.invalid">
        {{ nuevoResponsable.id ? 'Actualizar' : 'Guardar' }}
      </button>
    </form>
  </div>
</div>
<div class="container mt-5">
  <div class="card p-4 shadow-sm bg-light">
    <h2 class="text-center mb-4">Responsables Registrados</h2>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Correo</th>
          <th>Celular</th>
          <th>Puesto</th>
          <th>Departamento</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let responsable of responsables">
          <td>{{ responsable.id }}</td>
          <td>{{ responsable.nombre }}</td>
          <td>{{ responsable.apellido }}</td>
          <td>{{ responsable.correo }}</td>
          <td>{{ responsable.celular }}</td>
          <td>{{ getPuestoNombre(responsable.puestoId) }}</td>
          <td>{{ getDepartamentoNombre(responsable.departamentoId) }}</td>
          <td>
            <button (click)="updateResponsable(responsable)" class="btn btn-success btn-sm">Editar</button>
            <button (click)="eliminarResponsable(responsable.id)" class="btn btn-danger btn-sm">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
